{% extends "base_menu.html" %} 
{% load static %}
{% block title %}ê°ìƒ ê¸°ë¡ ë“±ë¡{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/update.css' %}" />
{% endblock %} 

{% block content %}

<div class="review-header">
    <div class="header-icon"></div>
    <div class="header-title"> ğŸ“˜ ê°ìƒ ê¸°ë¡ ìˆ˜ì •í•˜ê¸°</div>
    <p class="header-subtitle">ì±… ì •ë³´ë¥¼ í™•ì¸í•˜ê³  ê°ì •ì„ ìˆ˜ì •í•´ë³´ì„¸ìš”</p>
  </div>

<h2>ë¦¬ë·° ìˆ˜ì •</h2>
    <div class="book-selected-box">
        {% if review.book.thumbnail %}
            <img src="{{ review.book.thumbnail }}" alt="ì±… ì¸ë„¤ì¼" width="120"><br><br>
        {% endif %}

    <form method="post" action="{% url 'contents:update' review.id %}">
        {% csrf_token %}
        
    <div class="book-title">
        <p1><strong>{{ review.book.title }}</strong></p1>
    </div>
    <div class="book-author">
        <p2>{{ review.book.author }}</p2>
    </div>
    

    <a href="{% url 'contents:book_search' %}" class="change-btn">ë³€ê²½</a>
    </div>

        <div class="review-box">
            <label><strong>í‰ì </strong></label>
            <div class="star-rating">
              {% for i in rating_range|slice:"::-1" %}
                <input type="radio" id="star{{ i }}" name="rating" value="{{ i }}" {% if review.rating == i %}checked{% endif %}>
                <label for="star{{ i }}">â˜…</label>
              {% endfor %}
            </div>
          
            <label for="short_comment"><strong>í•œ ì¤„ ê°ìƒí‰</strong></label>
            <input type="text" id="short_comment" name="short_comment" value="{{ review.short_comment }}" placeholder="í•œ ì¤„ ê°ìƒí‰ì„ ì¨ì£¼ì„¸ìš”">
          
            <label for="detailed_review"><strong>ìƒì„¸ ê°ìƒí‰</strong> <span class="optional">(ì„ íƒ)</span></label>
            <textarea id="detailed_review" name="detailed_review" rows="5" placeholder="ìì„¸í•œ ê°ìƒí‰ì„ ì¨ì£¼ì„¸ìš”">{{ review.detailed_review }}</textarea>
          </div>
          
    <hr>

    <div class="emotion-section">
    <strong>ê°ì • íƒœê·¸:</strong><br>

    
        <strong>1ì°¨ ê°ì •</strong><br>
        <div class="tag-container">
        {% for tag in tags %}
            {% if tag.tag_type == 'primary' %}
            <label class="emotion-tag">
                <input type="checkbox" name="tag" value="{{ tag.id }}"
                {% if tag in review.tags.all %}checked{% endif %}>
                #{{ tag.name }}
            </label><br>
        {% endif %}
        {% endfor %}
        </div>

    
        <strong>2ì°¨ ê°ì •</strong><br>
        <div class="tag-container">
        {% for tag in tags %}
            {% if tag.tag_type == 'secondary' %}
            <label class="emotion-tag">
                <input type="checkbox" name="tag" value="{{ tag.id }}"
                {% if tag in review.tags.all %}checked{% endif %}>
                #{{ tag.name }}
            </label><br>
            {% endif %}
        {% endfor %}
        </div>
        </div>

    <br>
    <button type="submit">ìˆ˜ì • ì™„ë£Œ</button>
</form>
{% endblock %}