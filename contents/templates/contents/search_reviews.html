{% extends "base_menu.html" %} 
{% load static %}
{% block title %}리뷰 검색{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/search_reviews.css' %}" />
{% endblock %} 

{% block content %}
<div class="search-up">
  <div class="search-title">
    <a href="{% url 'contents:main' %}" class="nav home {% if request.resolver_match.url_name == 'main' %}active{% endif %}">
      <svg xmlns="http://www.w3.org/2000/svg" width="17" height="16" viewBox="0 0 17 16" fill="none">
        <path d="M15.909 6.95109H3.72288L9.04682 1.80561C9.4723 1.39439 9.4723 0.719571 9.04682 0.308354C8.94589 0.210607 8.826 0.133058 8.69403 0.0801464C8.56205 0.0272349 8.42057 0 8.27768 0C8.1348 0 7.99332 0.0272349 7.86134 0.0801464C7.72936 0.133058 7.60948 0.210607 7.50855 0.308354L0.319048 7.25687C0.217911 7.35442 0.137673 7.47028 0.0829265 7.59784C0.02818 7.72539 0 7.86213 0 8.00022C0 8.13832 0.02818 8.27505 0.0829265 8.40261C0.137673 8.53016 0.217911 8.64603 0.319048 8.74358L7.50855 15.6921C7.60955 15.7897 7.72946 15.8671 7.86143 15.92C7.9934 15.9728 8.13484 16 8.27768 16C8.42053 16 8.56197 15.9728 8.69394 15.92C8.82591 15.8671 8.94582 15.7897 9.04682 15.6921C9.14782 15.5945 9.22794 15.4786 9.28261 15.351C9.33727 15.2235 9.36541 15.0868 9.36541 14.9487C9.36541 14.8107 9.33727 14.674 9.28261 14.5464C9.22794 14.4189 9.14782 14.303 9.04682 14.2054L3.72288 9.0599H15.909C16.5091 9.0599 17 8.58542 17 8.0055C17 7.42557 16.5091 6.95109 15.909 6.95109Z" fill="#FFFBF2"/>
      </svg>
    </a> 
    <h2>리뷰 검색</h2>
  </div>
  <form method="get" action="{% url 'contents:search_reviews' %}">
    <div class="search-box">
      <input type="text" name="q" class="searchInput" placeholder="제목 또는 작가를 입력해 주세요" value="{{ query|default:'' }}">

      <button type="button" class="clear-btn" style="display: none;">
        <svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 15 15" fill="none">
          <path fill-rule="evenodd" clip-rule="evenodd" d="M15 7.5C15 11.6423 11.6423 15 7.5 15C3.35775 15 0 11.6423 0 7.5C0 3.35775 3.35775 0 7.5 0C11.6423 0 15 3.35775 15 7.5ZM4.58325 10.4167C4.51295 10.3464 4.47345 10.2511 4.47345 10.1516C4.47345 10.0522 4.51295 9.95682 4.58325 9.8865L6.96975 7.5L4.58325 5.1135C4.51494 5.04277 4.47714 4.94805 4.478 4.84972C4.47885 4.7514 4.51829 4.65735 4.58782 4.58782C4.65735 4.51829 4.7514 4.47885 4.84972 4.478C4.94805 4.47714 5.04277 4.51494 5.1135 4.58325L7.5 6.96975L9.8865 4.58325C9.95723 4.51494 10.052 4.47714 10.1503 4.478C10.2486 4.47885 10.3427 4.51829 10.4122 4.58782C10.4817 4.65735 10.5211 4.7514 10.522 4.84972C10.5229 4.94805 10.4851 5.04277 10.4167 5.1135L8.03025 7.5L10.4167 9.8865C10.4851 9.95723 10.5229 10.052 10.522 10.1503C10.5211 10.2486 10.4817 10.3427 10.4122 10.4122C10.3427 10.4817 10.2486 10.5211 10.1503 10.522C10.052 10.5229 9.95723 10.4851 9.8865 10.4167L7.5 8.03025L5.1135 10.4167C5.04318 10.4871 4.94781 10.5265 4.84838 10.5265C4.74894 10.5265 4.65357 10.4871 4.58325 10.4167Z" fill="#B1B1B1"/>
        </svg>
      </button>

      <button type="submit" class="search-btn">
        <svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 15 15" fill="none">
          <path d="M6.45084 12.9017C5.17499 12.9017 3.92778 12.5233 2.86695 11.8145C1.80611 11.1057 0.979292 10.0982 0.491044 8.91947C0.002795 7.74073 -0.124953 6.44369 0.123954 5.19235C0.372861 3.941 0.987244 2.79158 1.88941 1.88941C2.79158 0.987244 3.941 0.372861 5.19235 0.123954C6.44369 -0.124953 7.74073 0.002795 8.91947 0.491044C10.0982 0.979292 11.1057 1.80611 11.8145 2.86695C12.5233 3.92778 12.9017 5.17499 12.9017 6.45084C12.9017 7.29798 12.7348 8.13682 12.4106 8.91947C12.0865 9.70212 11.6113 10.4133 11.0123 11.0123C10.4133 11.6113 9.70212 12.0865 8.91947 12.4106C8.13682 12.7348 7.29798 12.9017 6.45084 12.9017ZM6.45084 1.2936C5.43422 1.2936 4.44044 1.59506 3.59515 2.15986C2.74986 2.72466 2.09104 3.52744 1.702 4.46667C1.31296 5.4059 1.21116 6.43941 1.4095 7.43649C1.60783 8.43358 2.09738 9.34946 2.81623 10.0683C3.53509 10.7872 4.45097 11.2767 5.44805 11.4751C6.44514 11.6734 7.47864 11.5716 8.41788 11.1826C9.35711 10.7935 10.1599 10.1347 10.7247 9.2894C11.2895 8.44411 11.591 7.45033 11.591 6.43371C11.591 5.07047 11.0494 3.76306 10.0854 2.7991C9.12149 1.83514 7.81408 1.2936 6.45084 1.2936Z" fill="#B1B1B1"/>
          <path d="M14.3581 15.0004C14.2737 15.0008 14.19 14.9843 14.112 14.952C14.0341 14.9196 13.9634 14.872 13.904 14.8119L10.3659 11.2738C10.2524 11.152 10.1906 10.9909 10.1936 10.8245C10.1965 10.658 10.2639 10.4992 10.3817 10.3815C10.4994 10.2638 10.6582 10.1963 10.8247 10.1934C10.9911 10.1905 11.1522 10.2522 11.274 10.3657L14.8121 13.9039C14.9324 14.0243 15 14.1876 15 14.3579C15 14.5282 14.9324 14.6915 14.8121 14.8119C14.7528 14.872 14.6821 14.9196 14.6041 14.952C14.5261 14.9843 14.4425 15.0008 14.3581 15.0004Z" fill="#B1B1B1"/>
        </svg>
      </button>
    </div>
  </form>
</div>


<ul>
  {% for review in reviews %}
    <li class="review-list">
      <a href="{% url 'contents:detail' review.id %}">
        <p>{{ review.user.nickname }}</p>
        <p>{{ review.book.title }}</p> / {{ review.book.author }}
        <p>리뷰 상세 보기</p>
        <div class="star-container">
          {% for i in "12345" %}
          {% if forloop.counter <= review.rating %}
              <svg xmlns="http://www.w3.org/2000/svg" width="17" height="15" viewBox="0 0 17 15" fill="none">
                  <path d="M7.04302 0.727591C7.36896 -0.24253 8.78461 -0.24253 9.10946 0.727591L10.272 4.19517C10.343 4.40635 10.4811 4.59036 10.6664 4.7209C10.8518 4.85143 11.075 4.92181 11.3041 4.92197H15.0654C16.1182 4.92197 16.5549 6.22811 15.7042 6.82851L12.6622 8.97099C12.4764 9.10164 12.3381 9.28595 12.2671 9.49751C12.196 9.70906 12.1959 9.93699 12.2667 10.1486L13.4292 13.6162C13.7551 14.5863 12.6089 15.3942 11.7561 14.7938L8.71399 12.6513C8.52843 12.5207 8.30501 12.4504 8.0757 12.4504C7.84639 12.4504 7.62297 12.5207 7.43741 12.6513L4.39533 14.7938C3.54355 15.3942 2.39842 14.5863 2.72327 13.6162L3.88578 10.1486C3.95659 9.93699 3.95646 9.70906 3.88542 9.49751C3.81438 9.28595 3.67606 9.10164 3.49031 8.97099L0.449323 6.82956C-0.401372 6.22916 0.0364701 4.92303 1.08816 4.92303H4.84838C5.07768 4.92308 5.30111 4.85281 5.4867 4.72226C5.67229 4.59171 5.81052 4.40758 5.8816 4.19622L7.04302 0.727591Z" fill="#475482"/>
              </svg>
          {% else %}
              <svg xmlns="http://www.w3.org/2000/svg" width="17" height="15" viewBox="0 0 17 15" fill="none">
                  <path d="M7.88921 0.727591C8.21515 -0.24253 9.6308 -0.24253 9.95565 0.727591L11.1182 4.19517C11.1892 4.40635 11.3272 4.59036 11.5126 4.7209C11.698 4.85143 11.9212 4.92181 12.1503 4.92197H15.9116C16.9644 4.92197 17.4011 6.22811 16.5504 6.82851L13.5084 8.97099C13.3226 9.10164 13.1843 9.28595 13.1133 9.49751C13.0422 9.70906 13.0421 9.93699 13.1129 10.1486L14.2754 13.6162C14.6013 14.5863 13.4551 15.3942 12.6023 14.7938L9.56018 12.6513C9.37462 12.5207 9.1512 12.4504 8.92189 12.4504C8.69258 12.4504 8.46916 12.5207 8.2836 12.6513L5.24152 14.7938C4.38974 15.3942 3.24462 14.5863 3.56947 13.6162L4.73197 10.1486C4.80278 9.93699 4.80266 9.70906 4.73161 9.49751C4.66057 9.28595 4.52225 9.10164 4.3365 8.97099L1.29551 6.82956C0.44482 6.22916 0.882662 4.92303 1.93435 4.92303H5.69457C5.92387 4.92308 6.1473 4.85281 6.33289 4.72226C6.51848 4.59171 6.65671 4.40758 6.72779 4.19622L7.88921 0.727591Z" fill="#B1B1B1"/>
              </svg>
          {% endif %}
          {% endfor %}
        </div>
        <p class="short-comment">{{ review.short_comment }}</p>
      </a>
    </li>
  {% empty %}
    <li class="search-none">검색 결과가 없습니다.</li>
  {% endfor %}
</ul>
{% endblock %}

{% block extra_js %}
  <script src="{% static 'js/search-clear.js' %}"></script>
{% endblock %}