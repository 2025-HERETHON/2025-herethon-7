{% extends "base_menu.html" %} 
{% load static %}
{% block title %}감상 기록 등록{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/book_search.css' %}" />
{% endblock %} 

{% block content %}
<div class="container">
  <header class="title-section">
    <div class="title">
      <svg xmlns="http://www.w3.org/2000/svg" width="29" height="24" viewBox="0 0 29 24" fill="none">
        <path d="M13.1801 5.25394V22.0772V5.25394ZM13.1504 21.7058C12.8507 21.7058 12.2364 21.3927 11.0106 20.7663C9.76449 20.1296 8.04318 19.4955 5.83721 19.0969C3.36123 18.6517 2.12459 18.4292 1.56162 17.7705C1 17.1105 1 16.0571 1 13.9464V5.65511C1 3.34773 1 2.1934 1.87618 1.48294C2.75101 0.772477 3.77974 0.957533 5.83586 1.32765C9.89679 2.06011 12.3161 3.59102 13.1504 4.46972C13.9847 3.59102 16.404 2.06011 20.4649 1.32894C22.5211 0.957533 23.5498 0.772477 24.4246 1.48294C25.3008 2.1934 25.3008 3.34644 25.3008 5.65511V9.41188M26.4672 13.2165L27.4055 14.112C27.5939 14.2919 27.7435 14.5057 27.8455 14.7411C27.9475 14.9765 28 15.2289 28 15.4838C28 15.7387 27.9475 15.9911 27.8455 16.2265C27.7435 16.4619 27.5939 16.6757 27.4055 16.8555L22.4887 21.6385C22.102 22.0088 21.6072 22.2579 21.0698 22.3529L18.0227 22.9844C17.9122 23.0081 17.7972 23.0048 17.6884 22.9747C17.5796 22.9446 17.4804 22.8888 17.4 22.8124C17.3196 22.736 17.2606 22.6414 17.2283 22.5373C17.196 22.4333 17.1916 22.3231 17.2154 22.217L17.8634 19.3247C17.9647 18.8109 18.2252 18.3386 18.6127 17.9698L23.5916 13.2152C23.9736 12.8509 24.4906 12.6464 25.0294 12.6464C25.5683 12.6464 26.0852 12.8522 26.4672 13.2165Z" fill="#FFFBF2"/>
        <path d="M13.1801 5.25394V22.0772M13.1504 21.7058C12.8507 21.7058 12.2364 21.3927 11.0106 20.7663C9.76449 20.1296 8.04318 19.4955 5.83721 19.0969C3.36123 18.6517 2.12459 18.4292 1.56162 17.7705C1 17.1105 1 16.0571 1 13.9464V5.65511C1 3.34773 1 2.1934 1.87618 1.48294C2.75101 0.772477 3.77974 0.957533 5.83586 1.32765C9.89679 2.06011 12.3161 3.59102 13.1504 4.46972C13.9847 3.59102 16.404 2.06011 20.4649 1.32894C22.5211 0.957533 23.5498 0.772477 24.4246 1.48294C25.3008 2.1934 25.3008 3.34644 25.3008 5.65511V9.41188M26.4672 13.2165L27.4055 14.112C27.5939 14.2919 27.7435 14.5057 27.8455 14.7411C27.9475 14.9765 28 15.2289 28 15.4838C28 15.7387 27.9475 15.9911 27.8455 16.2265C27.7435 16.4619 27.5939 16.6757 27.4055 16.8555L22.4887 21.6385C22.102 22.0088 21.6072 22.2579 21.0698 22.3529L18.0227 22.9844C17.9122 23.0081 17.7972 23.0048 17.6884 22.9747C17.5796 22.9446 17.4804 22.8888 17.4 22.8124C17.3196 22.736 17.2606 22.6414 17.2283 22.5373C17.196 22.4333 17.1916 22.3231 17.2154 22.217L17.8634 19.3247C17.9647 18.8109 18.2252 18.3386 18.6127 17.9698L23.5916 13.2152C23.9736 12.8509 24.4906 12.6464 25.0294 12.6464C25.5683 12.6464 26.0852 12.8522 26.4672 13.2165Z" stroke="#212842" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
      <h1>감상 기록 등록하기</h1>
    </div>
    <hr>
    <p>책 정보를 입력하고 감정을 기록해보세요</p>
  </header>

  <h2 class="search-title">책 검색</h2>
  <form method="get" action="{% url 'contents:book_search' %}" class="search-form">
    <div class="search-box">
      <input type="text" name="q" value="{{ query|default:'' }}" placeholder="제목을 입력해 주세요" required class="searchInput">

      <button type="button" class="clear-btn" style="display: none;">
        <svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 15 15" fill="none">
          <path fill-rule="evenodd" clip-rule="evenodd" d="M15 7.5C15 11.6423 11.6423 15 7.5 15C3.35775 15 0 11.6423 0 7.5C0 3.35775 3.35775 0 7.5 0C11.6423 0 15 3.35775 15 7.5ZM4.58325 10.4167C4.51295 10.3464 4.47345 10.2511 4.47345 10.1516C4.47345 10.0522 4.51295 9.95682 4.58325 9.8865L6.96975 7.5L4.58325 5.1135C4.51494 5.04277 4.47714 4.94805 4.478 4.84972C4.47885 4.7514 4.51829 4.65735 4.58782 4.58782C4.65735 4.51829 4.7514 4.47885 4.84972 4.478C4.94805 4.47714 5.04277 4.51494 5.1135 4.58325L7.5 6.96975L9.8865 4.58325C9.95723 4.51494 10.052 4.47714 10.1503 4.478C10.2486 4.47885 10.3427 4.51829 10.4122 4.58782C10.4817 4.65735 10.5211 4.7514 10.522 4.84972C10.5229 4.94805 10.4851 5.04277 10.4167 5.1135L8.03025 7.5L10.4167 9.8865C10.4851 9.95723 10.5229 10.052 10.522 10.1503C10.5211 10.2486 10.4817 10.3427 10.4122 10.4122C10.3427 10.4817 10.2486 10.5211 10.1503 10.522C10.052 10.5229 9.95723 10.4851 9.8865 10.4167L7.5 8.03025L5.1135 10.4167C5.04318 10.4871 4.94781 10.5265 4.84838 10.5265C4.74894 10.5265 4.65357 10.4871 4.58325 10.4167Z" fill="#B1B1B1"/>
        </svg>
      </button>

      <button type="submit" class="search-btn">
        <svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 15 15" fill="none">
          <path d="M6.45084 12.9017C5.17499 12.9017 3.92778 12.5233 2.86695 11.8145C1.80611 11.1057 0.979292 10.0982 0.491044 8.91947C0.002795 7.74073 -0.124953 6.44369 0.123954 5.19235C0.372861 3.941 0.987244 2.79158 1.88941 1.88941C2.79158 0.987244 3.941 0.372861 5.19235 0.123954C6.44369 -0.124953 7.74073 0.002795 8.91947 0.491044C10.0982 0.979292 11.1057 1.80611 11.8145 2.86695C12.5233 3.92778 12.9017 5.17499 12.9017 6.45084C12.9017 7.29798 12.7348 8.13682 12.4106 8.91947C12.0865 9.70212 11.6113 10.4133 11.0123 11.0123C10.4133 11.6113 9.70212 12.0865 8.91947 12.4106C8.13682 12.7348 7.29798 12.9017 6.45084 12.9017ZM6.45084 1.2936C5.43422 1.2936 4.44044 1.59506 3.59515 2.15986C2.74986 2.72466 2.09104 3.52744 1.702 4.46667C1.31296 5.4059 1.21116 6.43941 1.4095 7.43649C1.60783 8.43358 2.09738 9.34946 2.81623 10.0683C3.53509 10.7872 4.45097 11.2767 5.44805 11.4751C6.44514 11.6734 7.47864 11.5716 8.41788 11.1826C9.35711 10.7935 10.1599 10.1347 10.7247 9.2894C11.2895 8.44411 11.591 7.45033 11.591 6.43371C11.591 5.07047 11.0494 3.76306 10.0854 2.7991C9.12149 1.83514 7.81408 1.2936 6.45084 1.2936Z" fill="#B1B1B1"/>
          <path d="M14.3581 15.0004C14.2737 15.0008 14.19 14.9843 14.112 14.952C14.0341 14.9196 13.9634 14.872 13.904 14.8119L10.3659 11.2738C10.2524 11.152 10.1906 10.9909 10.1936 10.8245C10.1965 10.658 10.2639 10.4992 10.3817 10.3815C10.4994 10.2638 10.6582 10.1963 10.8247 10.1934C10.9911 10.1905 11.1522 10.2522 11.274 10.3657L14.8121 13.9039C14.9324 14.0243 15 14.1876 15 14.3579C15 14.5282 14.9324 14.6915 14.8121 14.8119C14.7528 14.872 14.6821 14.9196 14.6041 14.952C14.5261 14.9843 14.4425 15.0008 14.3581 15.0004Z" fill="#B1B1B1"/>
        </svg>
      </button>
    </div>
  </form>

  {% if results %}
    <section class="results">
      <ul>
        {% for book in results %}
          <li>
            <form method="post" action="{% url 'contents:select_book' %}" class="book-item-form">
              {% csrf_token %}
              <input type="hidden" name="google_book_id" value="{{ book.google_book_id }}">
              <input type="hidden" name="title" value="{{ book.title }}">
              <input type="hidden" name="author" value="{{ book.author }}">
              <input type="hidden" name="thumbnail" value="{{ book.thumbnail }}">

              <div class="book-item">
                {% if book.thumbnail %}
                  <img src="{{ book.thumbnail }}" alt="책 썸네일">
                {% endif %}
                <div class="book-info">
                  <div class="book-title">{{ book.title }}</div>
                  <div class="book-author">{{ book.author }}</div>
                </div>
                <div class="button-wrapper">
                  <button type="submit">선택</button>
                </div>
              </div>
            </form>
          </li>
        {% endfor %}
      </ul>
    </section>
  {% elif query %}
    <p class="no-result">검색 결과가 없습니다.</p>
  {% endif %}
</div>
{% endblock %}

{% block extra_js %}
  <script src="{% static 'js/search-clear.js' %}"></script>
{% endblock %}