{% extends "base_menu.html" %} 
{% load static %}

{% block title %}감상 기록 등록{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/create.css' %}" />
{% endblock %} 

<!-- 선택한 책 정보 박스 -->
<section class="book-search-preview">
  <h3>책 검색</h3>
  <div class="book-selected-box">
    <img src="{{ book.thumbnail }}" alt="{{ book.title }}">
    <div class="book-meta">
      <div class="book-title">{{ book.title }}</div>
      <div class="book-author">{{ book.author }}</div>
    </div>
    <form method="GET" action="{% url 'books:search' %}">
      <button type="submit">변경</button>
    </form>
  </div>
</section>

{% block content %}
<!-- 상단 타이틀 섹션 -->
<header class="title-section">
  <h1>📖 감상 기록 등록하기</h1>
  <p>책 정보를 입력하고 감정을 기록해보세요</p>
</header>

<!-- 리뷰 작성 폼 -->
<h2>책 검색</h2>
<div class="book-selected-box">
{% if book.thumbnail %}
  <img src="{{ book.thumbnail }}" alt="책 썸네일" width="120"><br><br>
{% endif %}
<form method="POST" action="{% url 'contents:create' book.id %}">       
    {% csrf_token %}
<div class="book-title">
<p><strong>{{ book.title }}</strong></p>
</div>
<div class="book-author">
<p>{{ book.author }}</p>
</div>


<a href="{% url 'contents:book_search'%}" class="change-btn">변경</a>
</div>

  <!-- 감상 작성 박스 -->
  <div class="review-box">
    <!-- ⭐ 평점 -->
    <div class="rating-row">
      <label for="rating"><strong>평점</strong></label>
      <div class="star-rating">
        {% for i in rating_range|slice:"::-1" %}
          <input type="radio" id="star{{ i }}" name="rating" value="{{ i }}">
          <label for="star{{ i }}">★</label>
        {% endfor %}
      </div>
    </div>

    <!-- 한 줄 감상평 -->
    <label for="short_comment"><strong>한 줄 감상평</strong></label>
    <input type="text" name="short_comment" id="short_comment" maxlength="100" placeholder="한 줄 감상평을 써주세요" required>

    <!-- 상세 감상평 -->
    <label for="detailed_review"><strong>상세 감상평</strong> <small>(선택)</small></label>
    <textarea name="detailed_review" id="detailed_review" rows="6" placeholder="자세한 감상평을 써주세요"></textarea>
  </div>

  <!-- 감정 태그 -->
  <div class="tag-section">
    <label><strong>감정 태그</strong></label>

    <strong>1차 감정</strong>
    <div class="tag-container">
      {% for tag in tags %}
        {% if tag.tag_type == 'primary' %}
          <input type="checkbox" id="tag{{ tag.id }}" name="tag" value="{{ tag.id }}">
          <label for="tag{{ tag.id }}">#{{ tag.name }}</label>
        {% endif %}
      {% endfor %}
    </div>

    <strong>2차 감정 (여성 중심 감정)</strong>
    <div class="tag-container">
      {% for tag in tags %}
        {% if tag.tag_type == 'secondary' %}
          <input type="checkbox" id="tag{{ tag.id }}" name="tag" value="{{ tag.id }}">
          <label for="tag{{ tag.id }}">#{{ tag.name }}</label>
        {% endif %}
      {% endfor %}
    </div>
  </div>

  <br><button type="submit">등록하기</button>
</form> 
{% endblock %}
